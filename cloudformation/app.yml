AWSTemplateFormatVersion: '2010-09-09'
Description: ResilienceHub Application
Parameters:
  StackIrland:
    Description: Arn for StackIrland
    Type: String
    Default: ''
  StackFrankfurt:
    Description: Arn for StackFrankfurt
    Type: String
    Default: ''
Resources:
  Application:
    Type: AWS::ResilienceHub::App
    Properties:
      AppAssessmentSchedule: Daily
      AppTemplateBody: !Sub '{"resources":[{"logicalResourceId":{"identifier":"LogsBucket","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::S3::Bucket","name":"s3bucket-logs"},{"logicalResourceId":{"identifier":"NAT","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::EC2::NatGateway","name":"natgateway-vpc"},{"logicalResourceId":{"identifier":"NAT2","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::EC2::NatGateway","name":"natgateway-vpc2"},{"logicalResourceId":{"identifier":"NAT3","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::EC2::NatGateway","name":"natgateway-vpc3"},{"logicalResourceId":{"identifier":"WebServerFleet","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::AutoScaling::AutoScalingGroup","name":"autoscalinggroup-fleet"},{"logicalResourceId":{"identifier":"ArtifactBucket","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::S3::Bucket","name":"s3bucket-art"},{"logicalResourceId":{"identifier":"Database","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::RDS::DBInstance","name":"rdsdbinstance-app"},{"logicalResourceId":{"identifier":"DNSRecordCNAME2PublicElasticLoadBalancerV2","logicalStackName":"${AWS::StackName}","resourceGroupName":null},"type":"AWS::Route53::RecordSet","name":"route53recordset-app"}],"appComponents":[{"name":"storage-s3bucket-logs","type":"AWS::ResilienceHub::StorageAppComponent","resourceNames":["s3bucket-logs"]},{"name":"networking-nat","type":"AWS::ResilienceHub::NetworkingAppComponent","resourceNames":["natgateway-vpc","natgateway-vpc2","natgateway-vpc3"]},{"name":"compute-app-fleet","type":"AWS::ResilienceHub::ComputeAppComponent","resourceNames":["autoscalinggroup-fleet"]},{"name":"storage-s3bucket-art","type":"AWS::ResilienceHub::StorageAppComponent","resourceNames":["s3bucket-art"]},{"name":"database-rds","type":"AWS::ResilienceHub::DatabaseAppComponent","resourceNames":["rdsdbinstance-app"]},{"name":"networking-dns","type":"AWS::ResilienceHub::NetworkingAppComponent","resourceNames":["route53recordset-app"]},{"name":"appcommon","type":"AWS::ResilienceHub::AppCommonAppComponent","resourceNames":[]}],"excludedResources":{"logicalResourceIds":[]},"version":2.0}'




{
"appArn": "arn:aws:resiliencehub:eu-west-1:172017021075:app/52fd7949-76bc-44e6-966a-a5df82a170ec",
"appTemplateBody": "{"resources":[{"logicalResourceId":{"identifier":"RestApi","logicalStackName":"lambda-vpc-eu-west-1-172017021075","resourceGroupName":null},"type":"AWS::ApiGateway::RestApi","name":"apigatewayrestapi-1"},{"logicalResourceId":{"identifier":"LambdaDynamo","logicalStackName":"lambda-vpc-eu-west-1-172017021075","resourceGroupName":null},"type":"AWS::Lambda::Function","name":"lambdafunction-2"},{"logicalResourceId":{"identifier":"DeadLetterTopic","logicalStackName":"lambda-vpc-eu-west-1-172017021075","resourceGroupName":null},"type":"AWS::SNS::Topic","name":"snstopic"},{"logicalResourceId":{"identifier":"DeadLetterTopic","logicalStackName":"lambda-vpc","resourceGroupName":null},"type":"AWS::SNS::Topic","name":"snstopic-1"},{"logicalResourceId":{"identifier":"LambdaDynamo","logicalStackName":"lambda-vpc","resourceGroupName":null},"type":"AWS::Lambda::Function","name":"lambdafunction-1"},{"logicalResourceId":{"identifier":"Lambda","logicalStackName":"lambda-vpc","resourceGroupName":null},"type":"AWS::Lambda::Function","name":"lambdafunction-3"},{"logicalResourceId":{"identifier":"RestApi","logicalStackName":"lambda-vpc","resourceGroupName":null},"type":"AWS::ApiGateway::RestApi","name":"apigatewayrestapi"},{"logicalResourceId":{"identifier":"Lambda","logicalStackName":"lambda-vpc-eu-west-1-172017021075","resourceGroupName":null},"type":"AWS::Lambda::Function","name":"lambdafunction"},{"logicalResourceId":{"identifier":"GlobalTable","logicalStackName":"lambda-vpc-eu-west-1-172017021075","resourceGroupName":null},"type":"AWS::DynamoDB::GlobalTable","name":"dynamodbglobaltable"}],"appComponents":[{"id":null,"name":"NotificationAppComponent-SNSTopic-DeadLetterTopic","type":"AWS::ResilienceHub::NotificationAppComponent","resourceNames":["snstopic","snstopic-1"]},{"id":null,"name":"ComputeAppComponent-LambdaFunction-LambdaDynamo","type":"AWS::ResilienceHub::ComputeAppComponent","resourceNames":["lambdafunction-1","lambdafunction-2"]},{"id":null,"name":"ComputeAppComponent-ApiGatewayRestApi-RestApi","type":"AWS::ResilienceHub::ComputeAppComponent","resourceNames":["apigatewayrestapi","apigatewayrestapi-1"]},{"id":null,"name":"ComputeAppComponent-LambdaFunction-Lambda","type":"AWS::ResilienceHub::ComputeAppComponent","resourceNames":["lambdafunction","lambdafunction-3"]},{"id":null,"name":"DatabaseAppComponent-DynamoDBTable-GlobalTable","type":"AWS::ResilienceHub::DatabaseAppComponent","resourceNames":["dynamodbglobaltable"]},{"id":null,"name":"appcommon","type":"AWS::ResilienceHub::AppCommonAppComponent","resourceNames":[]}],"excludedResources":{"logicalResourceIds":[{"identifier":"dns","logicalStackName":"","resourceGroupName":"","terraformSourceName":"","eksSourceName":""}]},"version":2.0,"additionalInfo":{"failover-regions":["{\"accounts\":[{\"id\":\"172017021075\"}],\"region\":\"eu-central-1\"}"]}}",
"appVersion": "draft"
}


















      Description: Citizen Intelligence Agency
      Name: !Sub 'CIA'
      ResiliencyPolicyArn: !Ref 'AppPolicy'
      ResourceMappings:
        - LogicalStackName: 'StackIrland'
          MappingType: CfnStack
          PhysicalResourceId:
            Identifier: !Sub '${StackIrland}'
            Type: Arn
        - LogicalStackName: 'StackFrankfurt'
          MappingType: CfnStack
          PhysicalResourceId:
            Identifier: !Sub '${StackFrankfurt}'
            Type: Arn
Metadata: {}
Outputs:
  Application:
    Value: !Ref Application
